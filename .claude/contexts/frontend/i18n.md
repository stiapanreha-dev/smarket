# Internationalization (i18n)

Multi-language support for EN/RU/AR using react-i18next.

## Supported Languages

- **EN** - English (default)
- **RU** - Russian (Cyrillic)
- **AR** - Arabic (RTL support)

## Setup

```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

i18n
  .use(initReactI18next)
  .init({
    resources: {
      en: { translation: enTranslations },
      ru: { translation: ruTranslations },
      ar: { translation: arTranslations },
    },
    lng: 'en',
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false,
    },
  });
```

## Usage in Components

```typescript
import { useTranslation } from 'react-i18next';

const ProductCard = ({ product }) => {
  const { t } = useTranslation();

  return (
    <div>
      <h3>{product.name[i18n.language] || product.name.en}</h3>
      <Button>{t('addToCart')}</Button>
      <span>{t('price', { amount: product.price })}</span>
    </div>
  );
};
```

## Translation Files

```typescript
// en.json
{
  "addToCart": "Add to Cart",
  "price": "${{amount}}",
  "itemsInCart": "{{count}} items in cart",
  "itemsInCart_plural": "{{count}} items in cart"
}

// ru.json
{
  "addToCart": "Добавить в корзину",
  "price": "{{amount}} ₽",
  "itemsInCart": "{{count}} товар в корзине",
  "itemsInCart_plural": "{{count}} товаров в корзине"
}

// ar.json
{
  "addToCart": "أضف إلى السلة",
  "price": "{{amount}} د.إ",
  "itemsInCart": "{{count}} عناصر في السلة"
}
```

## RTL Support (Arabic)

Automatically apply RTL for Arabic:

```typescript
import { useEffect } from 'react';
import { useTranslation } from 'react-i18next';

const App = () => {
  const { i18n } = useTranslation();

  useEffect(() => {
    document.dir = i18n.language === 'ar' ? 'rtl' : 'ltr';
  }, [i18n.language]);

  // ...
};
```

CSS for RTL:

```css
[dir='rtl'] .navbar {
  flex-direction: row-reverse;
}

[dir='rtl'] .product-card {
  text-align: right;
}
```

## Language Switcher

```typescript
const LanguageSwitcher = () => {
  const { i18n } = useTranslation();

  const changeLanguage = (lng: string) => {
    i18n.changeLanguage(lng);
    localStorage.setItem('language', lng);
  };

  return (
    <ButtonGroup>
      <Button onClick={() => changeLanguage('en')}>EN</Button>
      <Button onClick={() => changeLanguage('ru')}>RU</Button>
      <Button onClick={() => changeLanguage('ar')}>AR</Button>
    </ButtonGroup>
  );
};
```

## Product Translations

Products have translated fields:

```typescript
interface Product {
  name: {
    en: string;
    ru: string;
    ar: string;
  };
  description: {
    en: EditorJSData;
    ru: EditorJSData;
    ar: EditorJSData;
  };
}

// Access current language translation
const name = product.name[i18n.language] || product.name.en;
```

## Best Practices

1. **Always provide fallback** - Default to English if translation missing
2. **Use translation keys** - Not hardcoded strings
3. **Test RTL layout** - Ensure UI works for Arabic
4. **Pluralization** - Use `_plural` suffix for plural forms
5. **Store user preference** - Save to localStorage and user profile

## Related

- See `modules/user.md` for user locale preferences
- See `frontend/styling-layout.md` for RTL CSS
- See react-i18next docs: https://react.i18next.com/
